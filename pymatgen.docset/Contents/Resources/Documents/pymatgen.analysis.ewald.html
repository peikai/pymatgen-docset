
<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>pymatgen.analysis.ewald module — pymatgen 2021.3.3 documentation</title>
<link href="_static/css/theme.css" rel="stylesheet" type="text/css"/>
<link href="_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="_static/css/custom.css" rel="stylesheet" type="text/css"/>
<link href="https://pymatgen.orgpymatgen.analysis.ewald.html" rel="canonical"/>
<!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js" type="text/javascript"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/js/theme.js" type="text/javascript"></script>
<link href="genindex.html" rel="index" title="Index"/>
<link href="search.html" rel="search" title="Search"/>
<link href="pymatgen.analysis.excitation.html" rel="next" title="pymatgen.analysis.excitation module"/>
<link href="pymatgen.analysis.eos.html" rel="prev" title="pymatgen.analysis.eos module"/>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33990148-1']);
  _gaq.push(['_trackPageview']);
</script>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search" style="background: linear-gradient(0deg, rgba(23,63,162,1) 0%, rgba(0,70,192,1) 100%)">
<a alt="Documentation Home" class="icon icon-home" href="index.html"> pymatgen
          

          
          </a>
<div class="version">
                2021.3.3
              </div>
<div role="search">
<form action="search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div>
<div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="change_log.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="team.html">Development Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pymatgen.html">pymatgen package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="pymatgen.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pymatgen.alchemy.html">pymatgen.alchemy package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pymatgen.analysis.html">pymatgen.analysis package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.apps.html">pymatgen.apps package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.cli.html">pymatgen.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.command_line.html">pymatgen.command_line package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.core.html">pymatgen.core package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.electronic_structure.html">pymatgen.electronic_structure package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.entries.html">pymatgen.entries package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.ext.html">pymatgen.ext package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.io.html">pymatgen.io package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.optimization.html">pymatgen.optimization package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.phonon.html">pymatgen.phonon package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.symmetry.html">pymatgen.symmetry package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.transformations.html">pymatgen.transformations package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.util.html">pymatgen.util package</a></li>
<li class="toctree-l4"><a class="reference internal" href="pymatgen.vis.html">pymatgen.vis package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pymatgen.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="pymatgen.html#module-pymatgen">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="top navigation" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="index.html">pymatgen</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content style-external-links">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a class="icon icon-home" href="index.html"></a> »</li>
<li><a href="modules.html">pymatgen</a> »</li>
<li><a href="pymatgen.html">pymatgen package</a> »</li>
<li><a href="pymatgen.analysis.html">pymatgen.analysis package</a> »</li>
<li>pymatgen.analysis.ewald module</li>
<li class="wy-breadcrumbs-aside">
<a class="fa fa-github" href="https://github.com/materialsproject/pymatgen/blob/master/docs_rst/pymatgen.analysis.ewald.rst"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<div class="section" id="module-pymatgen.analysis.ewald">
<span id="pymatgen-analysis-ewald-module"></span><h1><a name="//apple_ref/cpp/Module/pymatgen.analysis.ewald"></a>pymatgen.analysis.ewald module<a class="headerlink" href="#module-pymatgen.analysis.ewald" title="Permalink to this headline">¶</a></h1>
<p>This module provides classes for calculating the ewald sum of a structure.</p>
<dl class="py class">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer"><a name="//apple_ref/cpp/Class/pymatgen.analysis.ewald.EwaldMinimizer"></a>
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">EwaldMinimizer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_to_return</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L498-L750"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class determines the manipulations that will minimize an ewald matrix,
given a list of possible manipulations. This class does not perform the
manipulations on a structure, but will return the list of manipulations
that should be done on one to produce the minimal structure. It returns the
manipulations for the n lowest energy orderings. This class should be used
to perform fractional species substitution or fractional species removal to
produce a new structure. These manipulations create large numbers of
candidate structures, and this class can be used to pick out those with the
lowest ewald sum.</p>
<p>An alternative (possibly more intuitive) interface to this class is the
order disordered structure transformation.</p>
<p>Author - Will Richards</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix</strong> – A matrix of the ewald sum interaction energies. This is stored
in the class as a diagonally symmetric array and so
self._matrix will not be the same as the input matrix.</p></li>
<li><p><strong>m_list</strong> – list of manipulations. each item is of the form
(multiplication fraction, number_of_indices, indices, species)
These are sorted such that the first manipulation contains the
most permutations. this is actually evaluated last in the
recursion since I’m using pop.</p></li>
<li><p><strong>num_to_return</strong> – The minimizer will find the number_returned lowest
energy structures. This is likely to return a number of duplicate
structures so it may be necessary to overestimate and then
remove the duplicates later. (duplicate checking in this
process is extremely expensive)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.ALGO_BEST_FIRST"><a name="//apple_ref/cpp/Attribute/pymatgen.analysis.ewald.EwaldMinimizer.ALGO_BEST_FIRST"></a>
<code class="sig-name descname"><span class="pre">ALGO_BEST_FIRST</span></code><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.ALGO_BEST_FIRST" title="Permalink to this definition">¶</a></dt>
<dd><p>Slowly increases the speed (with the cost of decreasing
accuracy) as the minimizer runs. Attempts to limit the run time to
approximately 30 minutes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ALGO_TIME_LIMIT</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.ALGO_COMPLETE"><a name="//apple_ref/cpp/Attribute/pymatgen.analysis.ewald.EwaldMinimizer.ALGO_COMPLETE"></a>
<code class="sig-name descname"><span class="pre">ALGO_COMPLETE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.ALGO_COMPLETE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.ALGO_FAST"><a name="//apple_ref/cpp/Attribute/pymatgen.analysis.ewald.EwaldMinimizer.ALGO_FAST"></a>
<code class="sig-name descname"><span class="pre">ALGO_FAST</span></code><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.ALGO_FAST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.ALGO_TIME_LIMIT"><a name="//apple_ref/cpp/Attribute/pymatgen.analysis.ewald.EwaldMinimizer.ALGO_TIME_LIMIT"></a>
<code class="sig-name descname"><span class="pre">ALGO_TIME_LIMIT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.ALGO_TIME_LIMIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.add_m_list"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.add_m_list"></a>
<code class="sig-name descname"><span class="pre">add_m_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix_sum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m_list</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L586-L600"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.add_m_list" title="Permalink to this definition">¶</a></dt>
<dd><p>This adds an m_list to the output_lists and updates the current
minimum if the list is full.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.best_case"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.best_case"></a>
<code class="sig-name descname"><span class="pre">best_case</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices_left</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L602-L655"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.best_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a best case given a matrix and manipulation list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix</strong> – the current matrix (with some permutations already
performed)</p></li>
<li><p><strong>m_list</strong> – [(multiplication fraction, number_of_indices, indices,
species)] describing the manipulation</p></li>
<li><p><strong>indices</strong> – Set of indices which haven’t had a permutation
performed on them.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.best_m_list"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.best_m_list"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">best_m_list</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.best_m_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Best m_list found.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Returns</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.get_next_index"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.get_next_index"></a>
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">get_next_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manipulation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices_left</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L657-L672"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.get_next_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an index that should have the most negative effect on the
matrix sum</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.minimize_matrix"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.minimize_matrix"></a>
<code class="sig-name descname"><span class="pre">minimize_matrix</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L577-L584"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.minimize_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>This method finds and returns the permutations that produce the lowest
ewald sum calls recursive function to iterate through permutations</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.minimized_sum"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.minimized_sum"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">minimized_sum</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.minimized_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimized sum</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Returns</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldMinimizer.output_lists"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldMinimizer.output_lists"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">output_lists</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldMinimizer.output_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>output lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Returns</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="pymatgen.analysis.ewald.EwaldSummation"><a name="//apple_ref/cpp/Class/pymatgen.analysis.ewald.EwaldSummation"></a>
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">EwaldSummation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">real_space_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recip_space_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7071067811865475</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_forces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L33-L495"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<p>Calculates the electrostatic energy of a periodic array of charges using
the Ewald technique.</p>
<p>Ref:
Ewald summation techniques in perspective: a survey
Abdulnour Y. Toukmaji and John A. Board Jr.
DOI: 10.1016/0010-4655(96)00016-1
URL: <a class="reference external" href="http://www.ee.duke.edu/~ayt/ewaldpaper/ewaldpaper.html">http://www.ee.duke.edu/~ayt/ewaldpaper/ewaldpaper.html</a></p>
<p>This matrix can be used to do fast calculations of ewald sums after species
removal.</p>
<p>E = E_recip + E_real + E_point</p>
<p>Atomic units used in the code, then converted to eV.</p>
<p>Initializes and calculates the Ewald sum. Default convergence
parameters have been specified, but you can override them if you wish.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>structure</strong> (<a class="reference internal" href="pymatgen.core.structure.html#pymatgen.core.structure.Structure" title="pymatgen.core.structure.Structure"><em>Structure</em></a>) – Input structure that must have proper
Species on all sites, i.e. Element with oxidation state. Use
Structure.add_oxidation_state… for example.</p></li>
<li><p><strong>real_space_cut</strong> (<em>float</em>) – Real space cutoff radius dictating how
many terms are used in the real space sum. Defaults to None,
which means determine automagically using the formula given
in gulp 3.1 documentation.</p></li>
<li><p><strong>recip_space_cut</strong> (<em>float</em>) – Reciprocal space cutoff radius.
Defaults to None, which means determine automagically using
the formula given in gulp 3.1 documentation.</p></li>
<li><p><strong>eta</strong> (<em>float</em>) – The screening parameter. Defaults to None, which means
determine automatically.</p></li>
<li><p><strong>acc_factor</strong> (<em>float</em>) – No. of significant figures each sum is
converged to.</p></li>
<li><p><strong>w</strong> (<em>float</em>) – Weight parameter, w, has been included that represents
the relative computational expense of calculating a term in
real and reciprocal space. Default of 0.7 reproduces result
similar to GULP 4.2. This has little effect on the total
energy, but may influence speed of computation in large
systems. Note that this parameter is used only when the
cutoffs are set to None.</p></li>
<li><p><strong>compute_forces</strong> (<em>bool</em>) – Whether to compute forces. False by
default since it is usually not needed.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pymatgen.analysis.ewald.EwaldSummation.CONV_FACT"><a name="//apple_ref/cpp/Attribute/pymatgen.analysis.ewald.EwaldSummation.CONV_FACT"></a>
<code class="sig-name descname"><span class="pre">CONV_FACT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">14.39964547842567</span></em><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.CONV_FACT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.as_dict"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.as_dict"></a>
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> → <span class="pre">Dict</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L447-L471"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Json-serialization dict representation of EwaldSummation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>verbosity</strong> (<em>int</em>) – Verbosity level. Default of 0 only includes the
matrix representation. Set to 1 for more details.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.compute_partial_energy"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.compute_partial_energy"></a>
<code class="sig-name descname"><span class="pre">compute_partial_energy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">removed_indices</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L131-L140"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.compute_partial_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives total ewald energy for certain sites being removed, i.e. zeroed
out.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.compute_sub_structure"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.compute_sub_structure"></a>
<code class="sig-name descname"><span class="pre">compute_sub_structure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub_structure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L142-L185"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.compute_sub_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives total ewald energy for an sub structure in the same
lattice. The sub_structure must be a subset of the original
structure, with possible different charges.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substructure</strong> (<a class="reference internal" href="pymatgen.core.structure.html#pymatgen.core.structure.Structure" title="pymatgen.core.structure.Structure"><em>Structure</em></a>) – Substructure to compute Ewald sum for.</p></li>
<li><p><strong>tol</strong> (<em>float</em>) – Tolerance for site matching in fractional coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Ewald sum of substructure.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.eta"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.eta"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">eta</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.eta" title="Permalink to this definition">¶</a></dt>
<dd><p>eta value used in Ewald summation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Returns</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.forces"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.forces"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">forces</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.forces" title="Permalink to this definition">¶</a></dt>
<dd><p>The forces on each site as a Nx3 matrix. Each row corresponds to a
site.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.from_dict"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.from_dict"></a>
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L473-L495"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an EwaldSummation instance from json serialized dictionary.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.get_site_energy"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.get_site_energy"></a>
<code class="sig-name descname"><span class="pre">get_site_energy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_index</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L293-L306"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.get_site_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the energy for a single site in the structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>site_index</strong> (<em>int</em>) – Index of site</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(float) - Energy of that site</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.point_energy"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.point_energy"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">point_energy</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.point_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The point energy.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.point_energy_matrix"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.point_energy_matrix"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">point_energy_matrix</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.point_energy_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The point space matrix. A diagonal matrix with the point terms for each
site in the diagonal elements.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.real_space_energy"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.real_space_energy"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">real_space_energy</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.real_space_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The real space space energy.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.real_space_energy_matrix"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.real_space_energy_matrix"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">real_space_energy_matrix</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.real_space_energy_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The real space energy matrix. Each matrix element (i, j) corresponds to
the interaction energy between site i and site j in real space.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.reciprocal_space_energy"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.reciprocal_space_energy"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">reciprocal_space_energy</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.reciprocal_space_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The reciprocal space energy.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.reciprocal_space_energy_matrix"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.reciprocal_space_energy_matrix"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">reciprocal_space_energy_matrix</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.reciprocal_space_energy_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The reciprocal space energy matrix. Each matrix element (i, j)
corresponds to the interaction energy between site i and site j in
reciprocal space.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.total_energy"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.total_energy"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">total_energy</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.total_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The total energy.</p>
</dd></dl>
<dl class="py method">
<dt id="pymatgen.analysis.ewald.EwaldSummation.total_energy_matrix"><a name="//apple_ref/cpp/Method/pymatgen.analysis.ewald.EwaldSummation.total_energy_matrix"></a>
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">total_energy_matrix</span></code><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.EwaldSummation.total_energy_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The total energy matrix. Each matrix element (i, j) corresponds to the
total interaction energy between site i and site j.</p>
<p>Note that this does not include the charged-cell energy, which is only important
when the simulation cell is not charge balanced.</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="pymatgen.analysis.ewald.compute_average_oxidation_state"><a name="//apple_ref/cpp/Function/pymatgen.analysis.ewald.compute_average_oxidation_state"></a>
<code class="sig-name descname"><span class="pre">compute_average_oxidation_state</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/materialsproject/pymatgen/blob/v2021.3.3/pymatgen/analysis/ewald.py#L753-L775"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pymatgen.analysis.ewald.compute_average_oxidation_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the average oxidation state of a site</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>site</strong> – Site to compute average oxidation state</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Average oxidation state of site.</p>
</dd>
</dl>
</dd></dl>
</div>
</div>
</div>
<footer>
<hr/>
<div role="contentinfo">
<p>
        
        © Copyright 2011, Pymatgen Development Team

    </p>
</div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
</div>
</div>
</section>
</div>
<script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>
</body>
</html>